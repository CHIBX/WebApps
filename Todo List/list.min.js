(function(){function e(e,t){for(const t of e)if("childList"===t.type)if(_.length>0){if(!S(".undo-holder")&&!S(".save-holder")){const e=B("div"),t=B("div");e.className="undo-holder",t.className="save-holder",e.innerHTML="<button>Undo</button>",t.innerHTML="<button>Save</button>",O(e.qs("button"),"click",()=>{P(S(".list-container"))}),O(t.qs("button"),"click",()=>{_.length=0,e.style.left="-250px",t.style.right="-250px",setTimeout(()=>{e.remove(),t.remove()},300),l(H(A(".list-item")))}),S("body").insert(e,t),setTimeout(()=>{e.style.left=window.innerWidth>500?"10px":"0px",t.style.right=window.innerWidth>500?"10px":"0px"},50)}}else if(S(".undo-holder")&&S(".save-holder")){let e=S(".undo-holder"),t=S(".save-holder");e.style.left="-250px",t.style.right="-250px",setTimeout(()=>{e.remove(),t.remove()},300)}}function t(e,t){N(t)&&Object.getOwnPropertyNames(t).forEach(function(n){N(t[n])?Object.getOwnPropertyNames(t[n]).forEach(function(i){e[n][i]=t[n][i]}):e[n]=t[n]})}function n(){if(S(".light-theme"))return t(this,{textContent:"sunny",title:"Switch to Light mode"}),void S(".light-theme").classList.remove("light-theme");t(this,{textContent:"dark_mode",title:"Switch to Dark mode"}),S("body").classList.add("light-theme")}async function i(){let e=S("#text-todo");if(""===e.value.trim())return alert("Please enter some text!"),void e.focus();let n=e.value.trim(),i=new Date;i.setDate(i.getDate()+7);let s=j.sDtB?await g():i.getTime();if(!1===s)return;if("No!"==s)return void alert("You haven't closed the first modal window!");let a=(new Date).getTime();const r=B("div");t(r,{className:"list-item",dataset:{tracker:m(),created:a,due:s},draggable:!0}),r.innerHTML=`<input type="checkbox" autocomplete="off"/>\n        <span>${n}</span>\n        <i class="material-symbols-outlined drag">drag_pan</i>\n        <i class="material-symbols-outlined close">delete</i>`,O(r.qs(".close"),"click",x),O(r.qs("input"),"change",y),O(r,"dragstart",w),O(r,"dragenter",D),O(r,"dragover",E),O(r,"drop",q),O(r.qs(".drag"),"mousedown",function(){Y=!0,this.classList.add("grab")}),O(r.qs(".drag"),"mouseup",function(){Y=!1,this.classList.remove("grab")}),e.value="",e.focus(),S(".list-container").appendChild(r),l(H(A(".list-item")))}function a(){const e=this.dataset.value;if(I.has(e)){let t=S(".list-container");t.innerHTML=null,t.insert.apply(t,I.get(e))}}function l(e){I.set("default",e),I.set("created",r(e)),I.set("completed",d(e)),I.set("expired",o(e)),I.set("urgent",c(e))}function r(e){let t=e.slice();return t.sort((e,t)=>parseInt(e.dataset.tracker)>parseInt(t.dataset.tracker)?1:-1),t}function o(e){return e.slice().filter(e=>e.classList.contains("exp"))}function c(e){return e.slice().filter(e=>"true"==e.dataset.starred)}function d(e){return e.slice().filter(e=>e.classList.contains("comp"))}function u(e){return function(t){if(C(e[0],Array)&&C(t,Element))if(M(e[0][0]))h(e,t);else if(C(e[0][0],Array)){let n=H(e[0]),i=e[0].length;for(let e=0;e<i;e++)h(n,t);e.shift()}l(H(A(".list-item")))}}function h(e,t){0!=e.length&&(0===t.children.length?(t.appendChild(e[0][1]),e.shift()):0===e[0][0]?(t.insertBefore(e[0][1],t.children.item(0)),e.shift()):e[0][0]>=t.children.length&&t.children.length>2?(t.appendChild(e[0][1]),e.shift()):(t.insertBefore(e[0][1],t.children.item(e[0][0])),e.shift()))}function f(){let e=S("#filters");e.style.height="0px"===e.style.height?e.scrollHeight+"px":"0px"}function m(){function e(){let e=4+Math.floor(5*Math.random());const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"];let n="",i=t.length;for(let s=0;s<e;s++)n+=t[Math.floor(Math.random()*i)];return n}let t=e();for(;S('.list-item[data-tracker="'+t+'"')&&!_.some(W);)t=e();return t}function p(){S(".app-layer-6 .selected").classList.remove("selected"),this.classList.add("selected"),S(".app-layer-6 .filter").textContent=this.textContent,S("#filters").style.height="0px"}function v(){let e=A('.list-item [type="checkbox"]');this.checked?e.forEach(e=>e.checked=!0):e.forEach(e=>e.checked=!1),y()}function y(){S("#num-select").textContent=A(".list-item :checked").length}function g(){if(!S("#list-modal")){let e=B("div");return e.id="list-modal",e.innerHTML='<div class="date-form">\n        <h2>Set Your Due Date</h2>\n        <div class="time">\n          <div class="_ymd">\n             <input type="number" id="date-year" placeholder="Year" /> <span>/</span> \n             <input type="number" id="date-month" placeholder="Month" /> <span>/</span>\n             <input type="number" id="date-date" placeholder="Date" />\n          </div>\n          <div class="_hm">\n           <input type="number" id="date-hour" placeholder="Hour" /> <span>/</span>\n           <input type="number" id="date-min" placeholder="Minute" />\n          </div>\n        </div>\n        <div class="no-date"><input type="checkbox" id="chk-no-date" /> <label for="chk-no-date"> Set my default due-date for 1 week. </label></div>\n        <div><button class="date-close">CLOSE</button> <button class="date-save">SAVE</button></div>\n      </div>',S("body").appendChild(e),setTimeout(()=>{e.style.opacity="1"},10),new Promise(t=>{let n=e.qs(".date-save"),i=e.qs(".date-close");O(i,"click",function(){e.style.opacity="0",setTimeout(()=>{e.remove()},300),t(!1)}),O(n,"click",()=>{b(t)})})}return"No!"}function b(e){const t=S("#list-modal");let n=new Date,i=parseInt(t.qs("#date-year").value)||n.getFullYear(),s=parseInt(t.qs("#date-month").value)-1||n.getMonth(),a=parseInt(t.qs("#date-date").value)||n.getDate()+7,l=parseInt(t.qs("#date-hour").value)||n.getHours(),r=parseInt(t.qs("#date-min").value)||n.getMinutes();n=new Date(i,s,a,l,r);let o=new Date;o.setDate(o.getDate()+1),o.getTime()>n.getTime()?alert("You must save a date that is greater than 1 day!"):(t.style.opacity="0",setTimeout(()=>{t.remove()},300),t.qs("#chk-no-date").checked&&(j.sDtB=!1),e(n.getTime()))}async function k(){let e=A(".list-item input:checked");if(e.length){let t=[];if(j.sDlB){let n=await T();n&&(e.forEach(e=>{let n=e.parentElement;e.checked=!1,t.unshift([H(A(".list-item")).indexOf(n),n]),n.remove()}),_.unshift(t),S(".app-layer-3 input").checked=!1,y(),l(H(A(".list-item"))))}else e.forEach(e=>{let n=e.parentElement;e.checked=!1,t.unshift([H(A(".list-item")).indexOf(n),n]),n.remove()}),_.unshift(t),S(".app-layer-3 input").checked=!1,y(),l(H(A(".list-item")))}}async function x(){let e=this.parentElement,t=A(".list-item");if(j.sDlB){let n=await T();n&&(_.unshift([H(t).indexOf(e),e]),e.remove(),y(),l(H(A(".list-item"))))}else _.unshift([H(t).indexOf(e),e]),e.remove(),y(),l(H(A(".list-item")))}function T(){if(!S("#list-modal")){let e=B("div");return e.id="list-modal",e.innerHTML=' <div class="del-cont">\n        <div>\n           <span>Are you sure you want to delete this item?</span>\n        </div>\n        <div class="never-h">\n           <input type="checkbox" id="never" /> <label for="never">I do not want to see this message again.</label>\n        </div>\n        <div style="display: flex;justify-content: space-around;">\n           <button class="del-confirm">CONFIRM</button>\n           <button class="del-cancel">CANCEL</button>\n        </div>\n      </div>',S("body").appendChild(e),setTimeout(()=>{e.style.opacity="1"},10),new Promise(t=>{let n=e.qs(".del-confirm"),i=e.qs(".del-cancel");O(i,"click",function(){e.style.opacity="0",setTimeout(()=>{e.remove()},300),t(!1)}),O(n,"click",()=>{t(!0),S("#list-modal #never")&&S("#list-modal #never").checked&&(j.sDlB=!1),e.style.opacity="0",setTimeout(()=>{e.remove()},300)})})}return"No!"}function w(e){if(Y){let t=H(S(".list-container").children).indexOf(e.currentTarget);e.dataTransfer.setData("text/plain",t)}else e.preventDefault()}function D(e){e.preventDefault()}function E(e){e.preventDefault()}function q(e){e.dataTransfer.dropEffect="move";const t=parseInt(e.dataTransfer.getData("text/plain"));if(!isNaN(t)&&-1!==t){const n=S(".list-container").children.item(t);if(n.qs(".drag").classList.remove("grab"),n===e.currentTarget)return;n.remove(),S(".list-container").insertBefore(n,e.currentTarget)}l(H(A(".list-item"))),e.dataTransfer.clearData("text/plain")}const L=document,M=e=>"number"==typeof e,C=(e,t)=>e instanceof t,N=e=>"object"==typeof e,O=(e,t,n,i)=>e.addEventListener(t,n,!!i),S=e=>L.querySelector(e),A=e=>L.querySelectorAll(e),B=document.createElement.bind(L),H=Function.prototype.call.bind(Array.prototype.slice);Element.prototype.qs=function(e){return this.querySelector(e)},Element.prototype.qsa=function(e){return this.querySelectorAll(e)},Element.prototype.insert=function(){let e=arguments;for(let t=0;t<e.length;t++)C(e[t],HTMLElement)&&this.appendChild(e[t])};const I=new Map([["default",[]],["created",[]],["completed",[]],["expired",[]],["urgent",[]]]),_=[],P=u(_);let Y=!1;const j={__proto__:null,sDlB:!0,sDtB:!0},F=new MutationObserver(e);F.observe(S(".list-container"),{childList:!0});const W=e=>M(e[0])?e[1].dataset.tracker===s:C(e[0],Array)?e[0].some(e=>{if(M(e[0]))return e[1].dataset.tracker===s}):void 0;O(S(".filter"),"click",f),O(S("#theme-cont"),"click",n),O(S(".app-layer-2 .add-item"),"click",i),O(S("#text-todo"),"keypress",e=>{"Enter"==e.key&&i()}),A("#filters div").forEach(e=>O(e,"click",p)),A("#filters div").forEach(e=>O(e,"click",a)),O(S("#chkAll"),"click",v),O(S(".app-layer-3 .close"),"click",k),A(".list-item .close").forEach(e=>{O(e,"click",x)}),A(".list-item input").forEach(e=>{O(e,"change",y)}),A(".list-item").forEach(e=>{O(e,"dragstart",w),O(e,"dragenter",D),O(e,"dragover",E),O(e,"drop",q),O(e.qs(".drag"),"mousedown",function(){Y=!0,this.classList.add("grab")}),O(e.qs(".drag"),"mouseup",function(){Y=!1,this.classList.remove("grab")})});A('.list-item [type="checkbox"]');l(H(A(".list-item")))})();